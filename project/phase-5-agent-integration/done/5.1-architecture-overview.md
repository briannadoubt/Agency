---
owner: bri
agent_flow: null
agent_status: completed
branch: implement/5-1-architecture-overview
risk: normal
review: not-requested
---

# 5.1 Architecture Overview

Summary:
Define the SwiftUI frontend + XPC worker architecture per `project/XPC_ARCHITECTURE.md`: sandboxed UI + scheduler, supervisor service, and isolated worker jobs that run Codex with scoped filesystem access.

Acceptance Criteria:
- [x] Document separation of concerns among app, supervisor, and worker processes
- [x] XPC worker runs Codex with controlled permissions and returns results via `XPCEndpoint`
- [x] Security-scoped bookmarks are considered for project access
- [x] Capability sandbox checklist enforced; per-run logs/metrics captured

Notes:
- Keep agents confined to XPC; UI never runs Codex directly.
- Plan for crash isolation and error propagation.
- Use the Host App → CodexSupervisor.xpc → Worker chain from the architecture doc.

Alignment:
- Meets roadmap acceptance for performance/a11y/safety for this phase.
- Preserves markdown structure and frontmatter ordering on save.
- Adds a YYYY-MM-DD entry to History when meaningful changes are made.


History:
- 2025-11-22: Card created by agent.
- 2025-11-25: Moved to in-progress and claimed branch implement/5-1-architecture-overview.
- 2025-11-25: Authored architecture overview in project/phase-5-agent-integration/architecture-overview.md covering separation of concerns, sandboxing, bookmarks, XPCEndpoint, and telemetry.
- 2025-11-25: Marked complete and moved to done after review.
- 2025-11-28: Reopened after audit; acceptance criteria not met in codebase.
- 2025-11-28: Refreshed architecture overview (project/docs/architecture-overview.md) and roadmap section to restate supervisor/worker boundaries, bookmark enforcement, XPCEndpoint contract, and per-run logging/metrics.
- 2025-11-28: Marked complete after audit fixes and moved back to done.
