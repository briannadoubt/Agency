---
owner: bri
agent_flow: null
agent_status: done
branch: main
risk: normal
review: not-requested
---

# 6.6 Tests & Previews

Summary:
Add regression coverage and previews for the new phase-creation flow, including backend, runner wiring, and UI.

Acceptance Criteria:
- [ ] Unit tests for PhaseCreator/CLI backend: directory creation, idempotency, seed cards, error cases
- [ ] Runner tests covering AgentFlow.plan log/progress transitions and snapshot refresh
- [ ] UI test that drives “Add Phase (with Agent…)” through a simulated successful run and verifies the new phase and plan card appear
- [ ] SwiftUI previews for the dialog and post-run state with mock data
- [ ] Tests run via xcodebuild scheme Agency; no flakiness or simulator leaks

Notes:
- Reuse existing simulated executor for deterministic UI tests.

Alignment:
- Maintains quality bar for agent-facing features.

History:
- 2025-11-28: Card drafted for Phase 6 planning.
- 2025-11-28: Moved to In Progress on branch implement/6-6-tests-and-previews.
- 2025-11-28: Completed tests, previews, and merged to main.
