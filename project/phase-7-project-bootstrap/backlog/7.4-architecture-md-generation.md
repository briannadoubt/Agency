---
owner: bri
agent_flow: null
agent_status: idle
branch: null
risk: normal
review: not-requested
---

# 7.4 ARCHITECTURE.md Generation

Summary:
Generate ARCHITECTURE.md from the roadmap so each project has a living technical blueprint covering stack choices, platforms, and implementation strategy.

Acceptance Criteria:
- [ ] Define ARCHITECTURE.md template/sections (goals, constraints, system overview, components, data/storage, integrations, testing/observability, risks)
- [ ] Derive content from ROADMAP.md (phases/tasks) plus user-provided inputs (target platforms, languages, tech stack)
- [ ] Support regeneration when the roadmap changes while preserving manual annotations where possible
- [ ] Include validation to ensure required sections are present and current
- [ ] Add tests that verify generated architecture output for sample projects

Notes:
- Keep style concise and consistent with ROADMAP.md phrasing
- Plan for future MCP/agent extension to update architecture as tasks complete

Risks, Assumptions, Guardrails:
- Idempotency: regeneration of ROADMAP.md, cards, and ARCHITECTURE.md must be repeatable; prefer diff-safe writes and backups.
- Non-destructive defaults: initializer refuses to overwrite existing files without explicit flags; dry-run previews required before writes.
- Validation-first: schema and ConventionsValidator checks gate writes; partial failures surface actionable recovery steps.
- Compatibility: preserve manual History entries and frontmatter fields when re-materializing; honor feature flags to disable auto-materialization in sensitive repos.
- Git hygiene: flows must respect dirty worktrees and avoid committing artifacts; interactive prompts available but scriptable flags remain.

Validation Strategy & Success Measures:
- Unit coverage for roadmap parser/generator (7.1), initializer orchestration (7.2), card materializer (7.3), architecture builder (7.4), and validators.
- End-to-end tests that run initializer in empty and pre-populated directories, asserting idempotent reruns and clean ConventionsValidator output.
- Success criteria: generated roadmap/cards/architecture pass validation, no unintended overwrites in existing repos, and bootstrap completes with clear logs and recovery guidance.

History:
- 2025-11-29: Card created for architecture generation.
- 2025-11-29: Added shared risks, guardrails, and validation strategy from phase plan.
