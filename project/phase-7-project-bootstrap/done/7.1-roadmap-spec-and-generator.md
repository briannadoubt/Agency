---
owner: bri
agent_flow: null
agent_status: done
branch: implement/7.1-roadmap-spec-and-generator
risk: normal
review: not-requested
---

# 7.1 ROADMAP Spec & Generator

Summary:
Define the canonical ROADMAP.md structure and build a generator that can author or refresh it from a high-level project goal, producing phase/task/subtask entries suitable for downstream materialization.

Acceptance Criteria:
- [x] Specify ROADMAP.md schema: phase ordering, task identifiers, optional metadata (owners, risks), version tag
- [x] Provide markdown template and example aligned with existing phases
- [x] Implement generator that accepts a project brief/goal and outputs a validated ROADMAP.md; supports regeneration without losing manual edits where possible
- [x] Validate existing ROADMAP.md files and surface actionable errors/upgrades
- [x] Add tests covering schema parsing, generation, and idempotent regeneration paths

Notes:
- Keep output compatible with PROJECT_WORKFLOW conventions and phase folder naming.
- Consider hooks for future MCP/agent-driven roadmap creation.
- Roadmap schema codified in `Agency/Models/RoadmapGenerator.swift` (versioned, machine-readable block, manual notes + history preservation).
- Validator added in `Agency/Conventions/RoadmapValidator.swift` to surface actionable issues for ROADMAP.md.
- Generator renders template-compatible markdown and machine-readable JSON; preserves manual notes/history on regeneration.
- Template/example captured in `docs/ROADMAP_TEMPLATE.md`; repository ROADMAP.md updated to versioned format with phases 6â€“7 data.

Risks, Assumptions, Guardrails:
- Idempotency: regeneration of ROADMAP.md, cards, and ARCHITECTURE.md must be repeatable; prefer diff-safe writes and backups.
- Non-destructive defaults: initializer refuses to overwrite existing files without explicit flags; dry-run previews required before writes.
- Validation-first: schema and ConventionsValidator checks gate writes; partial failures surface actionable recovery steps.
- Compatibility: preserve manual History entries and frontmatter fields when re-materializing; honor feature flags to disable auto-materialization in sensitive repos.
- Git hygiene: flows must respect dirty worktrees and avoid committing artifacts; interactive prompts available but scriptable flags remain.

Validation Strategy & Success Measures:
- Unit coverage for roadmap parser/generator (7.1), initializer orchestration (7.2), card materializer (7.3), architecture builder (7.4), and validators.
- End-to-end tests that run initializer in empty and pre-populated directories, asserting idempotent reruns and clean ConventionsValidator output.
- Success criteria: generated roadmap/cards/architecture pass validation, no unintended overwrites in existing repos, and bootstrap completes with clear logs and recovery guidance.

History:
- 2025-11-29: Card created for Phase 7 roadmap specification and generator.
- 2025-11-29: Added shared risks, guardrails, and validation strategy from phase plan.
- 2025-11-29: Implemented roadmap schema, generator, validator, template, and updated ROADMAP.md; added regression tests.
- 2025-11-29: Marked Done after review and passing tests.
