---
owner: bri
agent_flow: null
agent_status: done
branch: implement/7-2-project-initialization-cli
risk: normal
review: not-requested
---

# 7.2 Project Initialization CLI

Summary:
Implement a CLI/agent flow that initializes a project either in an existing folder or by creating a new folder, using ROADMAP.md as the single source of truth for structure and tasks.

Acceptance Criteria:
- [x] In-place init
- [x] New dir init
- [x] Dry-run
- [x] Support initializing in-place (non-empty directory) without destructive changes; gracefully handle conflicts
- [x] Support creating a new project directory with the roadmap-generated structure
- [x] Reads or generates ROADMAP.md and uses it to lay out phase folders and stub files
- [x] Provides dry-run/output preview and clear prompts/flags for interactive vs scripted use
- [x] Adds tests for both existing-folder and new-folder scenarios

Notes:
- Respect git state; avoid overwriting existing cards without explicit confirmation
- Consider environment variable/flag to select templates or minimal mode

Risks, Assumptions, Guardrails:
- Idempotency: regeneration of ROADMAP.md, cards, and ARCHITECTURE.md must be repeatable; prefer diff-safe writes and backups.
- Non-destructive defaults: initializer refuses to overwrite existing files without explicit flags; dry-run previews required before writes.
- Validation-first: schema and ConventionsValidator checks gate writes; partial failures surface actionable recovery steps.
- Compatibility: preserve manual History entries and frontmatter fields when re-materializing; honor feature flags to disable auto-materialization in sensitive repos.
- Git hygiene: flows must respect dirty worktrees and avoid committing artifacts; interactive prompts available but scriptable flags remain.

Validation Strategy & Success Measures:
- Unit coverage for roadmap parser/generator (7.1), initializer orchestration (7.2), card materializer (7.3), architecture builder (7.4), and validators.
- End-to-end tests that run initializer in empty and pre-populated directories, asserting idempotent reruns and clean ConventionsValidator output.
- Success criteria: generated roadmap/cards/architecture pass validation, no unintended overwrites in existing repos, and bootstrap completes with clear logs and recovery guidance.

History:
- 2025-11-29: Card created for Phase 7 initialization CLI.
- 2025-11-29: Added shared risks, guardrails, and validation strategy from phase plan.
- 2025-11-29: Moved to in-progress; working on initializer implementation.
- 2025-11-29: Implemented initializer CLI + tests; dry-run defaults, in-place and new project flows supported.
- 2025-11-29: Completed after review; initializer CLI merged with tests.
