---
owner: claude
agent_flow: implement
agent_status: succeeded
branch: claude/complete-phase-12-1Ebkk
risk: normal
review: not-requested
---

# 12.1 HTTP Provider Protocol & Registry

Summary:
Define the `AgentHTTPProvider` protocol for HTTP-based model providers and extend `ProviderRegistry` to support both CLI and HTTP providers.

Acceptance Criteria:
- [x] Create `AgentHTTPProvider` protocol in `Agency/Models/HTTPProviders/`
- [x] Define `HTTPProviderCapabilities` option set (streaming, tool use, vision, etc.)
- [x] Add endpoint configuration (baseURL, model, authentication)
- [x] Extend `ProviderRegistry` to register and discover HTTP providers
- [x] Create `HTTPProviderError` enum for HTTP-specific errors
- [x] Add unified `AgentProvider` type alias or enum for CLI + HTTP providers
- [x] Unit tests for protocol conformance and registry operations

Notes:
- Mirror the design patterns from `AgentCLIProvider` for consistency
- HTTP providers don't need a locator (just URL validation)
- Consider async health check for endpoint availability
- Provider registry should return providers sorted by preference

History:
- 2025-12-18: Card created from Phase 12 planning.
- 2025-12-20: Implemented AgentHTTPProvider protocol, HTTPProviderCapabilities, HTTPProviderEndpoint, HTTPProviderAuth, HTTPProviderError, and extended ProviderRegistry with HTTP provider support.
