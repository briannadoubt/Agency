---
owner: null
agent_flow: null
agent_status: idle
branch: null
risk: normal
review: not-requested
---

# 12.1 HTTP Provider Protocol & Registry

Summary:
Define the `AgentHTTPProvider` protocol for HTTP-based model providers and extend `ProviderRegistry` to support both CLI and HTTP providers.

Acceptance Criteria:
- [ ] Create `AgentHTTPProvider` protocol in `Agency/Models/HTTPProviders/`
- [ ] Define `HTTPProviderCapabilities` option set (streaming, tool use, vision, etc.)
- [ ] Add endpoint configuration (baseURL, model, authentication)
- [ ] Extend `ProviderRegistry` to register and discover HTTP providers
- [ ] Create `HTTPProviderError` enum for HTTP-specific errors
- [ ] Add unified `AgentProvider` type alias or enum for CLI + HTTP providers
- [ ] Unit tests for protocol conformance and registry operations

Notes:
- Mirror the design patterns from `AgentCLIProvider` for consistency
- HTTP providers don't need a locator (just URL validation)
- Consider async health check for endpoint availability
- Provider registry should return providers sorted by preference

History:
- 2025-12-18: Card created from Phase 12 planning.
